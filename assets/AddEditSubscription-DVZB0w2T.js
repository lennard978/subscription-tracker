import{u as w,a as k,f as S,b as C,r as n,j as e}from"./index-BJWEcCSC.js";function q(){const p=w(),{showToast:o}=k(),{id:s}=S(),{t}=C(),[d,h]=n.useState(""),[i,g]=n.useState(""),[u,f]=n.useState("monthly"),[m,y]=n.useState("Other"),[c,v]=n.useState(""),[b,j]=n.useState(!0),_=["Streaming","Fitness","Software","Productivity","Gaming","Bills","Education","Transport","Food","Other"];n.useEffect(()=>{if(s){const r=(JSON.parse(localStorage.getItem("subscriptions"))||[]).find(l=>l.id===Number(s));r&&(h(r.name),g(r.price),f(r.frequency),y(r.category||"Other"),v(r.datePaid||""),j(r.notify!==!1))}},[s]);const N=a=>{if(a.preventDefault(),!d.trim()){o(t("error_required"),"error");return}if(!i||Number(i)<=0){o(t("error_price_invalid"),"error");return}if(!c){o(t("error_paid_date_required"),"error");return}const r=JSON.parse(localStorage.getItem("subscriptions"))||[];if(s){const l=r.map(x=>x.id===Number(s)?{...x,name:d,price:Number(i),frequency:u,category:m,datePaid:c,notify:b}:x);localStorage.setItem("subscriptions",JSON.stringify(l)),o(t("toast_updated"),"success")}else{const l={id:Date.now(),name:d,price:Number(i),frequency:u,category:m,datePaid:c,notify:b};r.push(l),localStorage.setItem("subscriptions",JSON.stringify(r)),o(t("toast_added"),"success")}p("/dashboard")};return e.jsxs("div",{className:"max-w-md mx-auto mt-2 p-6 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6",children:t(s?"edit_title":"add_title")}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_name")}),e.jsx("input",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:d,onChange:a=>h(a.target.value),placeholder:"Netflix, Gym, Adobe..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm",children:[t("form_price")," (â‚¬)"]}),e.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:i,onChange:a=>g(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_frequency")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:u,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:"weekly",children:t("form_weekly")}),e.jsx("option",{value:"biweekly",children:t("form_biweekly")}),e.jsx("option",{value:"monthly",children:t("form_monthly")}),e.jsx("option",{value:"quarterly",children:t("form_quarterly")}),e.jsx("option",{value:"semiannual",children:t("form_semiannual")}),e.jsx("option",{value:"nine_months",children:t("form_nine_months")}),e.jsx("option",{value:"yearly",children:t("form_yearly")}),e.jsx("option",{value:"biennial",children:t("form_biennial")}),e.jsx("option",{value:"triennial",children:t("form_triennial")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_category")}),e.jsx("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:m,onChange:a=>y(a.target.value),children:_.map(a=>e.jsx("option",{value:a,children:t(`category_${a.toLowerCase()}`)||a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("label_select_paid_date")}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:c,onChange:a=>v(a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:a=>j(a.target.checked)}),e.jsx("label",{className:"text-sm",children:t("settings_notifications_info")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition active:scale-95",children:t(s?"form_save":"add_subscription")}),e.jsx("button",{type:"button",onClick:()=>p("/dashboard"),className:"w-full sm:w-auto px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition active:scale-95",children:t("button_cancel")})]})]})]})}function P(){return e.jsx("div",{children:e.jsx(q,{})})}export{P as default};
