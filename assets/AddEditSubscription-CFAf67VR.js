import{u as S,a as k,f as w,b as C,r as o,j as e}from"./index-Cofa-S7W.js";function P(){const j=S(),{showToast:i}=k(),{id:r}=w(),{t:s}=C(),[l,x]=o.useState(""),[n,g]=o.useState(""),[u,h]=o.useState("monthly"),[m,f]=o.useState("Other"),[c,y]=o.useState(""),[b,v]=o.useState(!0),N=["Streaming","Fitness","Software","Productivity","Gaming","Bills","Education","Transport","Food","Other"];o.useEffect(()=>{if(r){const a=(JSON.parse(localStorage.getItem("subscriptions"))||[]).find(d=>d.id===Number(r));a&&(x(a.name),g(a.price),h(a.frequency),f(a.category||"Other"),y(a.datePaid||""),v(a.notify!==!1))}},[r]);const _=t=>{if(t.preventDefault(),!l.trim()){i(s("error_required"),"error");return}if(!n||Number(n)<=0){i(s("error_price_invalid")||"Price must be a positive number","error");return}if(!c){i(s("error_paid_date_required")||"Please select the date you last paid","error");return}const a=JSON.parse(localStorage.getItem("subscriptions"))||[];if(r){const d=a.map(p=>p.id===Number(r)?{...p,name:l,price:Number(n),frequency:u,category:m,datePaid:c,notify:b}:p);localStorage.setItem("subscriptions",JSON.stringify(d)),i(s("toast_updated")||"Subscription updated","success")}else{const d={id:Date.now(),name:l,price:Number(n),frequency:u,category:m,datePaid:c,notify:b};a.push(d),localStorage.setItem("subscriptions",JSON.stringify(a)),i(s("toast_added")||"Subscription added","success")}j("/dashboard")};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6",children:s(r?"edit_title":"add_title")}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:s("form_name")}),e.jsx("input",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:l,onChange:t=>x(t.target.value),placeholder:"Netflix, Gym, Adobe..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm",children:[s("form_price")," (â‚¬)"]}),e.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:n,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:s("form_frequency")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:u,onChange:t=>h(t.target.value),children:[e.jsx("option",{value:"monthly",children:s("form_monthly")}),e.jsx("option",{value:"yearly",children:s("form_yearly")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:s("form_category")}),e.jsx("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:m,onChange:t=>f(t.target.value),children:N.map(t=>e.jsx("option",{value:t,children:s(`category_${t.toLowerCase()}`)||t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:s("label_select_paid_date")}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:c,onChange:t=>y(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:t=>v(t.target.checked)}),e.jsx("label",{className:"text-sm",children:s("settings_notifications_info")})]}),e.jsx("button",{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:s(r?"form_save":"add_subscription")})]})]})}function q(){return e.jsx("div",{children:e.jsx(P,{})})}export{q as default};
