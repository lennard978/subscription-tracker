import{u as S,e as k,f as w,r,j as e}from"./index-C-8mehtS.js";function P(){const N=S(),{showToast:i}=k(),{id:a}=w(),[o,p]=r.useState(""),[n,x]=r.useState(""),[c,g]=r.useState("monthly"),[u,h]=r.useState("Other"),[d,y]=r.useState(""),[m,f]=r.useState(!0),v=["Streaming","Fitness","Software","Productivity","Gaming","Bills","Education","Transport","Food","Other"];r.useEffect(()=>{if(a){const t=(JSON.parse(localStorage.getItem("subscriptions"))||[]).find(l=>l.id===Number(a));t&&(p(t.name),x(t.price),g(t.frequency),h(t.category||"Other"),y(t.datePaid||""),f(t.notify!==!1))}},[a]);const j=s=>{if(s.preventDefault(),!o.trim()){i("Name is required","error");return}if(!n||Number(n)<=0){i("Price must be a positive number","error");return}if(!d){i("Please select the date you last paid","error");return}const t=JSON.parse(localStorage.getItem("subscriptions"))||[];if(a){const l=t.map(b=>b.id===Number(a)?{...b,name:o,price:Number(n),frequency:c,category:u,datePaid:d,notify:m}:b);localStorage.setItem("subscriptions",JSON.stringify(l)),i("Subscription updated","success")}else{const l={id:Date.now(),name:o,price:Number(n),frequency:c,category:u,datePaid:d,notify:m};t.push(l),localStorage.setItem("subscriptions",JSON.stringify(t)),i("Subscription added","success")}N("/dashboard")};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6",children:a?"Edit Subscription":"Add Subscription"}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Name"}),e.jsx("input",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:o,onChange:s=>p(s.target.value),placeholder:"Netflix, Gym, Adobe..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Price (â‚¬)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:n,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Billing Frequency"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:c,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Category"}),e.jsx("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:u,onChange:s=>h(s.target.value),children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:"Date Paid"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:d,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:s=>f(s.target.checked)}),e.jsx("label",{className:"text-sm",children:"Notify me before renewal"})]}),e.jsx("button",{type:"submit",className:"w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:a?"Save Changes":"Add Subscription"})]})]})}function O(){return e.jsx("div",{children:e.jsx(P,{})})}export{O as default};
