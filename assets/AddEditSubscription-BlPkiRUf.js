import{u as S,a as w,f as k,b as C,r as o,j as e}from"./index-B8S5XaWa.js";function P(){const g=S(),{showToast:i}=w(),{id:r}=k(),{t}=C(),[d,x]=o.useState(""),[l,h]=o.useState(""),[u,y]=o.useState("monthly"),[m,f]=o.useState("Other"),[c,v]=o.useState(""),[b,j]=o.useState(!0),N=["Streaming","Fitness","Software","Productivity","Gaming","Bills","Education","Transport","Food","Other"];o.useEffect(()=>{if(r){const s=(JSON.parse(localStorage.getItem("subscriptions"))||[]).find(n=>n.id===Number(r));s&&(x(s.name),h(s.price),y(s.frequency),f(s.category||"Other"),v(s.datePaid||""),j(s.notify!==!1))}},[r]);const _=a=>{if(a.preventDefault(),!d.trim()){i(t("error_required"),"error");return}if(!l||Number(l)<=0){i(t("error_price_invalid")||"Price must be a positive number","error");return}if(!c){i(t("error_paid_date_required")||"Please select the date you last paid","error");return}const s=JSON.parse(localStorage.getItem("subscriptions"))||[];if(r){const n=s.map(p=>p.id===Number(r)?{...p,name:d,price:Number(l),frequency:u,category:m,datePaid:c,notify:b}:p);localStorage.setItem("subscriptions",JSON.stringify(n)),i(t("toast_updated")||"Subscription updated","success")}else{const n={id:Date.now(),name:d,price:Number(l),frequency:u,category:m,datePaid:c,notify:b};s.push(n),localStorage.setItem("subscriptions",JSON.stringify(s)),i(t("toast_added")||"Subscription added","success")}g("/dashboard")};return e.jsxs("div",{className:"max-w-md mx-auto mt-2 p-6 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6",children:t(r?"edit_title":"add_title")}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_name")}),e.jsx("input",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:d,onChange:a=>x(a.target.value),placeholder:"Netflix, Gym, Adobe..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 text-sm",children:[t("form_price")," (â‚¬)"]}),e.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:l,onChange:a=>h(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_frequency")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:u,onChange:a=>y(a.target.value),children:[e.jsx("option",{value:"monthly",children:t("form_monthly")}),e.jsx("option",{value:"yearly",children:t("form_yearly")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("form_category")}),e.jsx("select",{className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:m,onChange:a=>f(a.target.value),children:N.map(a=>e.jsx("option",{value:a,children:t(`category_${a.toLowerCase()}`)||a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm",children:t("label_select_paid_date")}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-md border dark:bg-gray-800",value:c,onChange:a=>v(a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:a=>j(a.target.checked)}),e.jsx("label",{className:"text-sm",children:t("settings_notifications_info")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition active:scale-95",children:t(r?"form_save":"add_subscription")}),e.jsx("button",{type:"button",onClick:()=>g("/dashboard"),className:"w-full sm:w-auto px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition active:scale-95",children:t("button_cancel")})]})]})]})}function q(){return e.jsx("div",{children:e.jsx(P,{})})}export{q as default};
